var v=Object.defineProperty,y=Object.defineProperties;var k=Object.getOwnPropertyDescriptors;var m=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;var $=(e,o,t)=>o in e?v(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,d=(e,o)=>{for(var t in o||(o={}))P.call(o,t)&&$(e,t,o[t]);if(m)for(var t of m(o))_.call(o,t)&&$(e,t,o[t]);return e},h=(e,o)=>y(e,k(o));import{a as b,s as w,U as p,V as I,d as O}from"./index.d5019723.js";const{VITE_API_URL:f}={VITE_API_URL:"https://summer-field-9143.fly.dev",VITE_GOOGLE_OAUTH_LOGIN_URL:"https://summer-field-9143.fly.dev/auth/google",VITE_ENV:"production",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0},s={user:`${f}/users`,post:`${f}/posts`,payment:`${f}/payment`},E=b(),{useModalAlert:c,useModalAlertText:l}=w(E),U="https://summer-field-9143.fly.dev",r=p.create({baseURL:U});p.defaults.timeout=5e3;r.interceptors.request.use(e=>(localStorage.getItem("token")&&(e.headers.Authorization="Bearer "+localStorage.getItem("token")),e),e=>(e.method.toUpperCase(),e),e=>e,e=>Promise.reject(e));r.interceptors.response.use(e=>{var t;return h(d({},e),{target:((t=e==null?void 0:e.data)==null?void 0:t.data)||{}})},e=>{if(e.response){const{status:t}=e.response,{name:u}=e.response.data.error,{message:n}=e.response.data;switch(t){case 400:c.value=!0;let a="";switch(u){case"40001":a=`\uFF0C${n}`,l.value=`\u683C\u5F0F\u932F\u8AA4${a}`;break;case"40002":a=`\uFF0C${n}`,n.includes("\u60A8\u7684\u5BC6\u78BC\u4E0D\u6B63\u78BA")&&(a="\uFF0C\u5E33\u865F\u6216\u5BC6\u78BC\u932F\u8AA4"),n.includes("\u5DF2\u8A3B\u518A\u6B64\u7528\u6236")&&(a="\uFF0C\u6B64 Email \u5DF2\u88AB\u8A3B\u518A"),n.includes("\u60A8\u7684\u820A\u5BC6\u78BC\u4E0D\u6B63\u78BA")&&(a="\uFF0C\u60A8\u7684\u539F\u5BC6\u78BC\u4E0D\u6B63\u78BA"),l.value=`\u5167\u5BB9\u932F\u8AA4${a}`;break;case"40003":l.value="\u4F60\u5C1A\u672A\u767B\u5165",I.push({name:"login"});break;case"40004":a=`\uFF0C${n}`,l.value=`\u64CD\u4F5C\u932F\u8AA4${a}`;break;case"40005":n.includes("large")&&(a="\uFF0C\u6A94\u6848\u8D85\u904E 2MB \u9650\u5236\uFF0C\u8ACB\u91CD\u65B0\u4E0A\u50B3"),l.value=`\u932F\u8AA4${a}`;break;case"40010":a=`\uFF0C${n}`,n.includes("\u4E0D\u5B58\u5728\u8A72\u7B46\u8CC7\u6599")&&(a="\uFF0C\u6B64 Email \u5C1A\u672A\u8A3B\u518A"),l.value=`ID \u932F\u8AA4${a}`;break;case"40011":l.value="Mongoose \u5B58\u5728\u91CD\u8907\u7684 _id";break;default:l.value="\u683C\u5F0F\u932F\u8AA4";break}break;case 401:c.value=!0,l.value="\u8EAB\u4EFD\u9A57\u8B49\u932F\u8AA4";case 404:break;case 500:switch(c.value=!0,u){case"50001":l.value="\u932F\u8AA4\uFF0C\u50C5\u63A5\u53D7\u683C\u5F0F jpg, png, jpeg\uFF0C\u8ACB\u91CD\u65B0\u4E0A\u50B3";break;default:l.value=`${t}: \u7CFB\u7D71\u932F\u8AA4\uFF0C\u8ACB\u6D3D\u7CFB\u7D71\u7BA1\u7406\u54E1`;break}break;default:c.value=!0,l.value=`${t}: \u7CFB\u7D71\u932F\u8AA4\uFF0C\u8ACB\u6D3D\u7CFB\u7D71\u7BA1\u7406\u54E1`;break}}if(e.code==="ECONNABORTED"&&e.message.indexOf("timeout")!==-1){const{config:t}=e;if(t.__retryCount=t.__retryCount||0,t.__retryCount>=t.retry)return Promise.reject(e);t.__retryCount+=1;var o=new Promise(function(u){setTimeout(function(){c.value=!0,l.value="\u4F3A\u670D\u5668\u6C92\u6709\u5373\u6642\u56DE\u61C9\uFF0C\u6B63\u5728\u5617\u8A66\u91CD\u65B0\u8ACB\u6C42\u670D\u52D9...",u()},t.retryDelay||1)});return o.then(()=>p(t)).finally(()=>{}).catch(u=>{c.value=!0,l.value="\u7CFB\u7D71\u932F\u8AA4\uFF0C\u8ACB\u6D3D\u7CFB\u7D71\u7BA1\u7406\u54E1",console.error(u)})}return e.response});function A(e){return r({url:`${s.user}/sign_in`,method:"post",data:e})}function B(e){return r({url:`${s.user}/sign_up_check`,method:"post",data:e})}function T(e){return r({url:`${s.user}/sign_up`,method:"post",data:e})}function R(){return r({url:`${s.user}/profile`,method:"get"})}function j(e){return r({url:`${s.user}/profile/${e}`,method:"get"})}function D(e){return r({url:`${s.user}/profile/${e.id}`,method:"patch",data:e.data})}function M(e){return r({url:`${s.user}/updatePassword`,method:"patch",data:e})}function S(e){return r({url:`${s.user}/forgetPassword`,method:"post",data:e})}function V(e){return r({url:`${s.user}/verification`,method:"post",data:e.data})}function q(e){return r({url:`${s.user}/changePassword`,method:"patch",data:e})}function x(e,o=1){let t=s.post;if(e){const u=Object.assign({},e.query);u.currentPage=o,Object.keys(u).forEach((a,i)=>{i===0?t+=`?${a}=${u[a]}`:t+=`&${a}=${u[a]}`})}return r({url:t,method:"get"})}function N(e){return r({url:`${s.post}/${e}`,method:"get"})}function F(e,o,t=1){let u=`${s.post}/${e}`;if(o){const n=Object.assign({},o.query);n.currentPage=t,Object.keys(n).forEach((i,g)=>{g===0?u+=`?${i}=${n[i]}`:u+=`&${i}=${n[i]}`})}return r({url:u,method:"get"})}function G(e){return r({url:s.post,method:"post",data:e})}function z(e){return r({url:`${s.post}/image`,method:"post",headers:{"Content-Type":"multipart/form-data"},data:e})}function H(e){return r({url:`${s.post}/${e}`,method:"delete"})}function J(e){const{_id:o,content:t,image:u}=e;return r({url:`${s.post}/${o}`,method:"patch",data:{content:t,image:u}})}function K(e){return r({url:`${s.user}/follows/${e}`,method:"get"})}function Q(e){return r({url:`${s.user}/follows/${e}`,method:"post"})}function W(e){return r({url:`${s.user}/follows/${e}`,method:"delete"})}function X(e){return r({url:`${s.user}/avatar`,method:"post",headers:{"Content-Type":"multipart/form-data"},data:e})}function Y(){return r({url:`${s.post}/likes`,method:"get"})}function Z(e){return r({url:`${s.post}/likes/${e}`,method:"put"})}function ee(e){return r({url:`${s.post}/likes/${e}`,method:"delete"})}function te(e,o){return r({url:`${s.post}/comment/${e}`,method:"post",data:{comment:o}})}function re(e,o){return r({url:`${s.post}/comment/${e}`,method:"patch",data:{comment:o}})}function se(e){return r({url:`${s.post}/comment/${e}`,method:"delete"})}function oe({postId:e,amt:o,description:t}){return r({url:`${s.payment}/createOrder`,method:"post",data:{postId:e,amt:o,description:t}})}function ae(e){return r({url:`${s.payment}/getOrderInfo/${e}`,method:"get"})}const ue=O("user",{state:()=>({_id:"",name:"",image:"",follows:[],likes:[]}),actions:{async patchUser(e){this.$patch(d({},e))}}});export{T as A,S as B,V as C,q as D,x as a,J as b,N as c,z as d,oe as e,ae as f,F as g,K as h,W as i,Y as j,H as k,se as l,R as m,re as n,te as o,G as p,Z as q,ee as r,X as s,D as t,ue as u,M as v,j as w,Q as x,A as y,B as z};
